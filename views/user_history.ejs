<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>History</title>
    <!-- <link rel="stylesheet" href="./dist/output.css" /> -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/js/popupcancel.js"></script>
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tangerine:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kapakana:wght@300..400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Libre+Caslon+Display&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <!-- font -->
    <!-- manu -->
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
    <!-- arrow -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
</head>

<body class="bg-gradient-to-t from-[#F2F1EB] to-[#DBB3C1] h-screen bg-fixed bg-cover bg-center min-h-screen">

    <!--  start navbar -->
    <%- include('nav_user', { activePage: 'history'}) %>
    <!-- <header
        class="bg-gradient-to-r from-[#DBB3C1] to-[#A5848F] max-w-[93%] mx-auto rounded-3xl shadow-lg shadow-black-200 my-2 font-bold fixed w-full z-50 top-5 left-1/2 -translate-x-1/2 z-50">
        <nav class="font-[tangerine] p-[0.5vh] flex justify-between items-center">
            <div class="flex items-center">
                <img src="curl.png" alt="#" class="w-[5vh] m-2">
                <span class="text-[#E5408E] text-[4.5vh] align-middle ml-2">SSBeauty</span>
            </div>
            <div class="flex items-center gap-5">
                <div
                    class="nav md:static md:minh-fit md:bg-transparent  absolute bg-white rounded-3xl right-[1%] top-[-1000%] p-3 ">
                    <ul
                        class="flex md:flex-row flex-col items-center md:gap-5 gap-2 text-[3.7vh] md:text-[4.2vh] md:text-white text-[#E5408E]">
                        <li>
                            <a href=""
                                class="p-2 md:hover:bg-white md:hover:text-[#E5408E] md:rounded-xl hover:bg-pink-100 rounded-xl ">Hair</a>
                        </li>
                        <li>
                            <a href=""
                                class="p-2 md:hover:bg-white md:hover:text-[#E5408E] md:rounded-xl hover:bg-pink-100 rounded-xl">Spa</a>
                        </li>
                        <li>
                            <a href=""
                                class="p-2 md:bg-white md:text-[#E5408E] md:rounded-xl hover:bg-pink-100 rounded-xl ">History</a>
                        </li>
                        <li>
                            <a href=""
                                class="p-2 md:hover:bg-white text-[#E5408E] md:rounded-xl bg-pink-100 rounded-xl">Logout</a>
                        </li>
                    </ul>
                </div>
                <div class="flex items-center">
                    <a href="">
                        <img src="profile.png" alt="" class="w-[5vh] mr-2">
                    </a>
                    <ion-icon onclick="menuToggle(this)" name="menu"
                        class="text-3xl cursor-pointer md:hidden text-white"></ion-icon>
                </div>
            </div>
        </nav>
    </header> -->
    <!--  end navbar -->

    <!-- history -->
   
    <div class="md:pt-[16vh] pt-[13vh] space-y-5 pb-10">
        <% appointments.forEach(appointment => { %>
            <div class="max-w-[75%]  mx-auto rounded-3xl shadow-lg shadow-black-200  
                bg-white/60 backdrop-blur-md p-5 flex flex-wrap max-[500px]:max-w-[90%]">
                <a class="flex gap-2 " href="">
                    <img src="https://inwfile.com/s-de/pbx3es.jpg" alt="Card Image"
                        class="w-[20vh] mb-2 aspect-[4/3] object-cover rounded-xl">
                    <div class="ml-5 space-y-4 justify-center  flex flex-col max-[1085px]:ml-[2vh]">
                        <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                            <img src="/img/shopping-cart.png" alt="" class="w-[2vh]">
                            <p><%= appointment.Service.name %></p>
                        </div>
                        <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                            <img src="/img/pending.png" alt="" class="w-[2vh]">
                            <p><%= appointment.Service.duration %> นาที</p>
                        </div>
                        <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                            <img src="/img/usd-circle.png" alt="" class="w-[2vh]">
                            <p><%= appointment.Service.price %> บาท</p>
                        </div>
                    </div>
                </a>

                <div class="flex ml-[14vh] max-[1248px]:ml-[4vh]">
                    <div class=" space-y-4 justify-center  flex flex-col">
                        <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                            <img src="/img/user.png" alt="" class="w-[2vh]">
                            <p>ช่าง: <%= appointment.Staff.User.first_name %> <%= appointment.Staff.User.last_name %></p>
                        </div>
                        <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                            <img src="/img/calendar.png" alt="" class="w-[2vh]">
                            <div class="flex flex-wrap">
                                <p>จองวันที่:</p>
                                <% date = new Date(appointment.appointment_date) 
                                const hours = date.getHours();
                                const minutes = date.getMinutes();
                                const formattedHours = hours < 10 ? '0' + hours : hours;
                                const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;
                                const hhmm = `${formattedHours}:${formattedMinutes}`;
                                %>
                                <p> <%= date.toDateString() %></p>

                            </div>
                        </div>
                        <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                            <img src="/img/alarm-clock.png" alt="" class="w-[2vh]">
                            <div class="flex flex-wrap">
                                <p>เวลา:</p>
                            <p><%= hhmm %> น.</p>
                            </div>
                        </div>
                    </div>
                    <div class="ml-5 space-y-4 justify-center  flex flex-col ml-[14vh] max-[1248px]:ml-[4vh]">
                        <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                            <img src="/img/info.png" alt="" class="w-[2vh]">
                            <div class="flex flex-wrap">
                                <p>สถานะ:</p>
                            <p><%= appointment.showstatus %></p>
                            </div>
                        </div>
                        <% if (appointment.status === 'completed') { %>
                            <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                                <img src="/img/bill.png" alt="" class="w-[2vh]">
                                <button class="p-2 bg-white rounded-xl text-[#E5408E]">ใบเสร็จ</button>
                            </div>
                        <%  }; %>
                    </div>
                </div>
                <% if (appointment.status === 'booked') { %>
                    <div
                        class="bg-[#DBB3C1] text-white font-[kanit] text-[2vh] p-2 rounded-xl shadow-lg hover:scale-105 transition-transform duration-300  h-fit self-end ml-auto">
                        <button onclick="openCancelModal(<%= appointment.appointment_id %>);">ยกเลิกการจอง</button>
                    </div>
                <%  }; %>
            </div>
                <!-- Popup cancelModal -->
                    <div id="cancelModal-<%= appointment.appointment_id %>" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
                        <div class="bg-white rounded-2xl shadow-lg p-8 max-w-sm w-full text-center">
                            <h2 class="text-xl font-bold mb-4 text-[#E5408E] font-[kanit]">ยืนยันการยกเลิกการจอง</h2>
                            <p class="mb-6 text-[#616162] font-[kanit]">คุณต้องการยกเลิกการจองนี้จริงหรือไม่?</p>
                            <div class="flex justify-center gap-4">
                                <button onclick="closeCancelModal(<%= appointment.appointment_id %>)" class="px-4 py-2 rounded-xl bg-gray-200 text-[#616162] font-[kanit] hover:bg-gray-300">ไม่</button>
                                <button onclick="confirmCancel(<%= appointment.appointment_id %>)" class="px-4 py-2 rounded-xl bg-[#E5408E] text-white font-[kanit] hover:bg-pink-600">ใช่, ยกเลิก</button>
                            </div>
                        </div>
                    </div>
        <% }) %>
        <!-- <div class="max-w-[75%]  mx-auto rounded-3xl shadow-lg shadow-black-200  
               bg-white/60 backdrop-blur-md p-5 flex flex-wrap max-[500px]:max-w-[90%]">
            <a class="flex gap-2 " href="">
                <img src="https://inwfile.com/s-de/pbx3es.jpg" alt="Card Image"
                    class="w-[20vh] mb-2 aspect-[4/3] object-cover rounded-xl">
                <div class="ml-5 space-y-4 justify-center  flex flex-col max-[1085px]:ml-[2vh]">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/shopping-cart.png" alt="" class="w-[2vh]">
                        <p>Tensonez</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/pending.png" alt="" class="w-[2vh]">
                        <p>120 นาที</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/usd-circle.png" alt="" class="w-[2vh]">
                        <p>760 บาท</p>
                    </div>
                </div>
            </a>

            <div class="flex ml-[14vh] max-[1248px]:ml-[4vh]">
                <div class=" space-y-4 justify-center  flex flex-col">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/user.png" alt="" class="w-[2vh]">
                        <p>ช่าง: A</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/calendar.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>จองวันที่:</p>
                            <p>20/08/2026</p>

                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/alarm-clock.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>เวลา:</p>
                        <p>14:00 น.</p>
                        </div>
                    </div>
                </div>
                <div class="ml-5 space-y-4 justify-center  flex flex-col ml-[14vh] max-[1248px]:ml-[4vh]">
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/info.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>สถานะ:</p>
                        <p>รอใช้งาน</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/bill.png" alt="" class="w-[2vh]">
                        <button class="p-2 bg-white rounded-xl text-[#E5408E]">ใบเสร็จ</button>
                    </div>

                </div>
            </div>
            <div
                class="bg-[#DBB3C1] text-white font-[kanit] text-[2vh] p-2 rounded-xl shadow-lg hover:scale-105 transition-transform duration-300  h-fit self-end ml-auto">
                <button>ยกเลิกการจอง</button>
            </div>
        </div>


        <div class="max-w-[75%]  mx-auto rounded-3xl shadow-lg shadow-black-200  
               bg-white/60 backdrop-blur-md p-5 flex flex-wrap max-[500px]:max-w-[90%]">

            <a class="flex gap-2 " href="">
                <img src="https://inwfile.com/s-de/pbx3es.jpg" alt="Card Image"
                    class="w-[20vh] mb-2 aspect-[4/3] object-cover rounded-xl">
                <div class="ml-5 space-y-4 justify-center  flex flex-col max-[1085px]:ml-[2vh]">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/shopping-cart.png" alt="" class="w-[2vh]">
                        <p>Tensonez</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/pending.png" alt="" class="w-[2vh]">
                        <p>120 นาที</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/usd-circle.png" alt="" class="w-[2vh]">
                        <p>760 บาท</p>
                    </div>
                </div>
            </a>

            <div class="flex ml-[14vh] max-[1248px]:ml-[4vh]">
                <div class=" space-y-4 justify-center  flex flex-col">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/user.png" alt="" class="w-[2vh]">
                        <p>ช่าง: A</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/calendar.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>จองวันที่:</p>
                            <p>20/08/2026</p>

                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/alarm-clock.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>เวลา:</p>
                        <p>14:00 น.</p>
                        </div>
                    </div>
                </div>
                <div class="ml-5 space-y-4 justify-center  flex flex-col ml-[14vh] max-[1248px]:ml-[4vh]">
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/info.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>สถานะ:</p>
                        <p>รอใช้งาน</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/bill.png" alt="" class="w-[2vh]">
                        <button class="p-2 bg-white rounded-xl text-[#E5408E]">ใบเสร็จ</button>
                    </div>

                </div>
            </div>
            <div
                class="bg-[#DBB3C1] text-white font-[kanit] text-[2vh] p-2 rounded-xl shadow-lg hover:scale-105 transition-transform duration-300  h-fit self-end ml-auto">
                <button>ยกเลิกการจอง</button>
            </div>
        </div>
        <div class="max-w-[75%]  mx-auto rounded-3xl shadow-lg shadow-black-200  
               bg-white/60 backdrop-blur-md p-5 flex flex-wrap max-[500px]:max-w-[90%]">

            <a class="flex gap-2 " href="">
                <img src="https://inwfile.com/s-de/pbx3es.jpg" alt="Card Image"
                    class="w-[20vh] mb-2 aspect-[4/3] object-cover rounded-xl">
                <div class="ml-5 space-y-4 justify-center  flex flex-col max-[1085px]:ml-[2vh]">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/shopping-cart.png" alt="" class="w-[2vh]">
                        <p>Tensonez</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/pending.png" alt="" class="w-[2vh]">
                        <p>120 นาที</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/usd-circle.png" alt="" class="w-[2vh]">
                        <p>760 บาท</p>
                    </div>
                </div>
            </a>

            <div class="flex ml-[14vh] max-[1248px]:ml-[4vh]">
                <div class=" space-y-4 justify-center  flex flex-col">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/user.png" alt="" class="w-[2vh]">
                        <p>ช่าง: A</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/calendar.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>จองวันที่:</p>
                            <p>20/08/2026</p>

                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/alarm-clock.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>เวลา:</p>
                        <p>14:00 น.</p>
                        </div>
                    </div>
                </div>
                <div class="ml-5 space-y-4 justify-center  flex flex-col ml-[14vh] max-[1248px]:ml-[4vh]">
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/info.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>สถานะ:</p>
                        <p>รอใช้งาน</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/bill.png" alt="" class="w-[2vh]">
                        <button class="p-2 bg-white rounded-xl text-[#E5408E]">ใบเสร็จ</button>
                    </div>

                </div>
            </div>
            <div
                class="bg-[#DBB3C1] text-white font-[kanit] text-[2vh] p-2 rounded-xl shadow-lg hover:scale-105 transition-transform duration-300  h-fit self-end ml-auto">
                <button>ยกเลิกการจอง</button>
            </div>
        </div>
        <div class="max-w-[75%]  mx-auto rounded-3xl shadow-lg shadow-black-200  
               bg-white/60 backdrop-blur-md p-5 flex flex-wrap max-[500px]:max-w-[90%]">

            <a class="flex gap-2 " href="">
                <img src="https://inwfile.com/s-de/pbx3es.jpg" alt="Card Image"
                    class="w-[20vh] mb-2 aspect-[4/3] object-cover rounded-xl">
                <div class="ml-5 space-y-4 justify-center  flex flex-col max-[1085px]:ml-[2vh]">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/shopping-cart.png" alt="" class="w-[2vh]">
                        <p>Tensonez</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/pending.png" alt="" class="w-[2vh]">
                        <p>120 นาที</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/usd-circle.png" alt="" class="w-[2vh]">
                        <p>760 บาท</p>
                    </div>
                </div>
            </a>

            <div class="flex ml-[14vh] max-[1248px]:ml-[4vh]">
                <div class=" space-y-4 justify-center  flex flex-col">
                    <div class="flex items-center gap-2  font-[inter] text-[#616162] text-[2vh]">
                        <img src="/img/user.png" alt="" class="w-[2vh]">
                        <p>ช่าง: A</p>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/calendar.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>จองวันที่:</p>
                            <p>20/08/2026</p>

                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/alarm-clock.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>เวลา:</p>
                        <p>14:00 น.</p>
                        </div>
                    </div>
                </div>
                <div class="ml-5 space-y-4 justify-center  flex flex-col ml-[14vh] max-[1248px]:ml-[4vh]">
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh]">
                        <img src="/img/info.png" alt="" class="w-[2vh]">
                        <div class="flex flex-wrap">
                            <p>สถานะ:</p>
                        <p>รอใช้งาน</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2  font-[kanit] text-[#616162] text-[2vh] ">
                        <img src="/img/bill.png" alt="" class="w-[2vh]">
                        <button class="p-2 bg-white rounded-xl text-[#E5408E]">ใบเสร็จ</button>
                    </div>

                </div>
            </div>
            <div
                class="bg-[#DBB3C1] text-white font-[kanit] text-[2vh] p-2 rounded-xl shadow-lg hover:scale-105 transition-transform duration-300  h-fit self-end ml-auto">
                <button>ยกเลิกการจอง</button>
            </div>
        </div> -->
    </div>




</body>
<script>
    // nav manu
    const nav = document.querySelector('.nav');
    function menuToggle(e) {
        e.name = e.name === 'menu' ? 'close' : 'menu';
        nav.classList.toggle('top-[110%]');
        nav.classList.toggle('top-[-1000%]');
    }
</script>

</html>